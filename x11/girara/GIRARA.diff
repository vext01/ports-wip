diff --git a/utils.c b/utils.c
index 5c29917..02ed4ce 100644
--- a/utils.c
+++ b/utils.c
@@ -233,22 +233,33 @@ girara_file_open(const char* path, const char* mode)
 char*
 girara_file_read_line(FILE* file)
 {
+  char *copy;
+
   if (file == NULL) {
     return NULL;
   }
 
   size_t size = 0;
   char* line = NULL;
-  if (getline(&line, &size, file) == -1) {
-    if (line != NULL) {
-      free(line);
-    }
+
+  if ((line = fgetln(file, &size)) == NULL) {
+    if (ferror(file))
+	    perror("fgetln");
     return NULL;
   }
 
   /* remove the trailing line deliminator */
   g_strdelimit(line, "\n\r", '\0');
-  return line;
+
+  if ((copy = malloc(size+1)) == NULL) {
+	  perror("malloc");
+	  return NULL;
+  }
+
+  memcpy(copy, line, size);
+  copy[size] = '\0';
+
+  return copy;
 }
 
 char*
